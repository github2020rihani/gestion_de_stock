{% extends 'base.html.twig' %}

{% block title %} {% if user %} Modifier {% else %}  Ajouter {% endif %}un compte {% endblock %}

{% block stylesheets %}


{% endblock %}

       {% block smenu %}
           <ul class="breadcrumb">
               <li class="breadcrumb-item">
                   <a href="index.html">Tableau de bord</a>
               </li>
               <li class="breadcrumb-item">
                   <a href="index.html">comptes</a>
               </li>
               <li class="breadcrumb-item">
                   <span> {% if user %} Modifier {% else %}  Ajouter {% endif %}</span>
               </li>
           </ul>
       {% endblock %}

        {% block content %}
            <div class="element-wrapper">
                <div class="element-box">
                    {% if not form.vars.valid %}
                    <div class="alert alert-danger" role="alert">
                        {# on affiche en premier les erreurs globales (cas classiques) #}
                        {% for error in form.vars.errors %}
                            <li>{{ error.message }}</li>
                        {% endfor %}
                        {# ainsi que les erreurs concernant chaque champs #}
                        {% for child in form.children %}
                            {# si le champ à des erreur #}
                            {% if child.vars.errors is defined %}
                                {% for error in child.vars.errors %}
                                    <p>{{ error.message }} </p> {# on ajoute le label du champ devant l'erreur pour plus de précisions. #}
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                    {{ form_start(form,{'method': 'post', 'action': path('add_user'),'attr': {'class': 'needs-validation' , 'novalidate' : 'novalidate' , 'id' : 'formValidate' }}) }}

                    <h5 class="form-header">
                        {% if user %} Modifier {% else %}  Ajouter {% endif %}un compte
                    </h5>
                    <div class="form-desc">
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Matricule *</label>
                                {{ form_widget(form.matricule ,{'attr': {'class' : 'form-control' , 'placeholder': 'Enter le  matricule'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît entre le Matricule
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Nom *</label>
                                {{ form_widget(form.lastName , {'attr': {'class' : 'form-control' , 'placeholder': 'Entre le nom'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît entre le nom
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Prénom *</label>
                                {{ form_widget(form.firstName , {'attr': {'class' : 'form-control' , 'placeholder': 'Entre le prénom'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît entre le nom
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Téléphone * (8 chiffres)</label>
                                {{ form_widget(form.phone , {'attr': {'class' : 'form-control' , 'placeholder': '99999999'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît entre le nom
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-4">

                            <div class="form-group">
                                <label>Fonction *</label>
                                {{ form_widget(form.function , {'attr': {'class' : 'form-control' , 'placeholder': 'Entre la fontion'}}) }}
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                                <div class="invalid-feedback">
                                    s'il vous plaît entre le prénom
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Email *</label>
                                {{ form_widget(form.email , {'attr': {'class' : 'form-control' , 'placeholder': 'Enter email valid'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît entre un email valide
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Département *</label>
                                {{ form_widget(form.departemnt ) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît choisir un département
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Role *</label>
                                {{ form_widget(form.roles) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît choisir un role
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Mot de passe *</label>
                                {{ form_widget(form.plainPassword.first , {'attr': {'class' : 'form-control' , 'placeholder': 'Entre le mot de passe'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît entre le mot de passe
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Confirmer le mot de passe *</label>
                                {{ form_widget(form.plainPassword.second , {'attr': {'class' : 'form-control' , 'placeholder': 'Confirmer le mot de passe'}}) }}
                                <div class="invalid-feedback">
                                    s'il vous plaît repeter le mot de passe
                                </div>
                                <div class="help-block form-text with-errors form-control-feedback"></div>
                            </div>
                        </div>
                    </div>


                    <div class="form-buttons-w">
                        <button type="submit"
                                class="btn btn-primary mr-2">{% if user %} Modifier {% else %}  Sauvargarder {% endif %}</button>
                        <button type="reset" class="btn btn-danger">Annuler</button>
                    </div>
                    {{ form_end(form) }}
                </div>
            </div>
        {% endblock %}


{% block javascripts %}

{% endblock %}