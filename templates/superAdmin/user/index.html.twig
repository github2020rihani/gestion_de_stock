{% extends 'base.html.twig' %}

{% block title %} Liste des comptes {% endblock %}

{% block stylesheets %}

{% endblock %}
       {% block smenu %}
           <ul class="breadcrumb">
               <li class="breadcrumb-item">
                   <a href="index.html">Tableau de bord</a>
               </li>
               <li class="breadcrumb-item">
                   <a href="index.html">comptes</a>
               </li>
               <li class="breadcrumb-item">
                   <span>Liste</span>
               </li>
           </ul>
       {% endblock %}

        {% block content %}

            <div class="element-wrapper">
                <h6 class="element-header">
                    Liste des comptes
                </h6>
                {{ include('default/FlashBag/flashBag.html.twig') }}

                <div class="element-box">
                    <h5 class="form-header">
                        <a href="{{ path('add_user') }}" class="btn btn-primary add-list float-right mb-2"><i
                                    class="las la-plus mr-3"></i>Ajouter un compte </a>

                    </h5>

                    <div class="form-desc">

                    </div>


                    <div class="table-responsive">

                        <table id="dataTable1" width="100%" class="table table-striped table-lightfont tableUsers ">
                            <thead>
                            <tr>
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prénom</th>
                                <th>Email</th>
                                <th>Statut</th>
                                <th>Roles</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tfoot>
                            <tr>
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prénom</th>
                                <th>Email</th>
                                <th>Statut</th>
                                <th>Roles</th>
                                <th>Action</th>
                            </tr>
                            </tfoot>
                            <tbody class="ligth-body">
                            {% for u in users %}
                                <tr>
                                    <td>{{ u.matricule }}</td>
                                    <td>{{ u.firstName }}</td>
                                    <td>{{ u.lastName }}</td>
                                    <td>{{ u.email }}</td>
                                    <td>
                                        {% if u.status == 1 %}
                                            <div id="statusUser_{{ u.id }}" class="badge badge-success">Activé</div>
                                        {% else %}
                                            <div id="statusUser_{{ u.id }}" class="badge badge-danger">Désactivé</div>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if u.roles[0] == 'ROLE_SUPER_ADMIN' %}
                                            SuperAdmin

                                        {% elseif u.roles[0] == 'ROLE_ADMIN' %}
                                            Administrateur

                                        {% elseif u.roles[0] == 'ROLE_GERANT' %}
                                            Gérant

                                        {% else %}
                                            Responsable
                                        {% endif %}
                                    </td>
                                    <td>

                                        <div class="d-flex align-items-center list-action">



                                            <a class="  btn btn-sm btn-icon btn-success"
                                               data-toggle="tooltip"
                                               data-placement="top" title="" data-original-title="Modifier"
                                               style="color: white"
                                               href="{{ path('edit_user', {id: u.id}) }}"
                                            >
                                                <i class="fa fa-edit"></i>
                                            </a>

                                            {% if u.status == 1 %}

                                                <a id="btn_statusUser_{{ u.id }}" class="btn btn-sm btn-danger btn_changeStatus mr-2"
                                                   data-toggle="tooltip"
                                                   data-placement="top" title="" data-original-title="Désactiver" data-id="{{ u.id }}"
                                                   style="color: white"
                                                >
                                                    <i class="fa fa-lock"></i>
                                                </a>

                                            {% else %}
                                                <a  id="btn_statusUser_{{ u.id }}" class="btn btn-sm btn-warning btn_changeStatus mr-2"
                                                    title="Activer" data-id="{{ u.id }}"
                                                ><i class="fa fa-edit"></i></a>


                                                <a id="btn_statusUser_{{ u.id }}" class="btn btn-sm btn-danger btn_changeStatus mr-2"
                                                   data-toggle="tooltip"
                                                   data-placement="top" title="" data-original-title="Activer" data-id="{{ u.id }}"
                                                   style="color: white"
                                                >
                                                    <i class="fa fa-unlock"></i>|
                                                </a>
                                            {% endif %}
                                        </div>
                                    </td>

                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>




        {% endblock %}


{% block javascripts %}
    <script src="{{ asset('app/js/user/index.js') }}"></script>

{% endblock %}