{% extends 'base.html.twig' %}

{% block title %} {%  if fournisseur %} Modifier {% else%}  Ajouter {% endif %}un fournisseur {% endblock %}

{% block stylesheets %}

{% endblock %}

        {% block content %}
    <!-- Wrapper Start -->

            <div class="container-fluid">
                <div class="row">
                    <div class="col-xl-3 col-lg-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between">
                                <div class="header-title">
                                    <h4 class="card-title">{%  if fournisseur %} Modifier {% else%}  Ajout {% endif %}  un fournisseur </h4>
                                </div>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="form-group">
                                        <div class="crm-profile-img-edit position-relative">
                                            <img class="crm-profile-pic rounded avatar-100" src="{{ asset('assets/images/user/03.jpg') }}" alt="profile-pic">
                                            <div class="crm-p-image bg-primary">
                                                <i class="las la-pen upload-button"></i>
                                                <input class="file-upload" type="file" accept="image/*">
                                            </div>
                                        </div>

                                    </div>



                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-8">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between">
                                <div class="header-title">
                                    <h4 class="card-title">Informations de fournisseur</h4>
                                </div>
                            </div>
                            <div class="card-body">
                                {%  if fournisseur %}
                                    {{ form_start(form,{'method': 'post', 'action': path('edit_fournisseur' , {id: fournisseur.id}),'attr': {'data-toggle': 'validator'}}) }}
                                {% else%}
                                    {{ form_start(form,{'method': 'post', 'action': path('add_fournisseur'),'attr': {'data-toggle': 'validator'}}) }}
                                {% endif %}
                                <div class="new-user-info">
                                    {{ form_start(form,{'method': 'post', 'action': path('add_client'),'attr': {'data-toggle': 'validator'}}) }}
                                        <div class="row">
                                            <div class="form-group col-md-6">
                                                <label for="pno">Code :</label>
                                                {{ form_widget(form.code , {'attr': {'class' : 'form-control' , 'placeholder': 'Enter Code'}}) }}
                                            </div>




                                            <div class="form-group col-md-6">
                                                <label for="fname">Nom:</label>
                                                {{ form_widget(form.nom ,{'attr': {'class' : 'form-control' , 'placeholder': 'Enter Nom'}}) }}
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="lname">Prenom:</label>
                                                {{ form_widget(form.prenom ,{'attr': {'class' : 'form-control' , 'placeholder': 'Enter Prenom'}}) }}
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="add1">Adresse:</label>
                                                {{ form_widget(form.adresse ,{'attr': {'class' : 'form-control' , 'placeholder': 'Enter adresse'}}) }}
                                            </div>

                                            <div class="form-group col-md-6">
                                                <label for="add1">Pays:</label>
                                                {{ form_widget(form.country ,{'attr': {'class' : 'form-control'}}) }}
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="add1">Ville:</label>
                                                {{ form_widget(form.city ,{'attr': {'class' : 'form-control'}}) }}
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="add2">Telephone:</label>
                                                {{ form_widget(form.telephone ,{'attr': {'class' : 'form-control' , 'placeholder': 'Enter telephone'}}) }}
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="email">Email:</label>
                                                {{ form_widget(form.email ,{'attr': {'class' : 'form-control' , 'placeholder': 'Enter email'}}) }}
                                            </div>




                                        </div>
                                        <hr>

                                    <button type="submit" class="btn btn-primary mr-2">{%  if fournisseur %} Modifier {% else%}  Sauvargarder {% endif %}</button>
                                    <button type="reset" class="btn btn-danger">Annuler</button>

                                    {{ form_start(form) }}
                                    {{ form_end(form) }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endblock %}


{% block javascripts %}
    <script>
        var $country= $('#fournisseur_country');

        $country.change(function() {
            var $form = $(this).closest('form');
            var data = {};
            console.log($country.val());
            data[$country.attr('name')] = $country.val();

            $.ajax({
                url : $form.attr('action'),
                type: $form.attr('method'),
                data : data,
                success: function(html) {
                    $('#fournisseur_city').replaceWith(
                        $(html).find('#fournisseur_city')
                    );
                }
            });
        });
    </script>

{% endblock %}
