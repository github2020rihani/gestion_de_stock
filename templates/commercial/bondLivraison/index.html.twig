{% extends 'base.html.twig' %}

{% block title %} Liste des bon de livraison {% endblock %}

{% block stylesheets %}

{% endblock %}
       {% block smenu %}
           <ul class="breadcrumb">
               <li class="breadcrumb-item">
                   <a href="{{ path('dashboard_personelle') }}">Tableau de bord</a>
               </li>
               <li class="breadcrumb-item">
                   <a href="#">BL</a>
               </li>
               <li class="breadcrumb-item">
                   <span>Liste</span>
               </li>
           </ul>
       {% endblock %}

        {% block content %}

            <div class="element-wrapper">
                <h6 class="element-header">
                    Liste des bon de livraison
                </h6>
                {{ include('default/FlashBag/flashBag.html.twig') }}

                <div class="element-box">
                    <h5 class="form-header">
                        <a href="{{ path('perso_add_bl') }}" class="btn btn-primary add-list float-right mb-2"><i
                                    class="las la-plus mr-3"></i>Crée une Bon de livraison </a>

                    </h5>

                    <div class="form-desc">

                    </div>

                    <div class="table-responsive">

                        <table id="dataTable1" width="100%" class="table table-striped table-lightfont table_bl">
                            <thead>
                            <tr>
                                <th>Date</th>
                                <th>Numéro</th>
                                <th>Client</th>
                                <th>Type paiement</th>
                                <th>Statut</th>
                                <th>devi</th>
                                <th>Total TTC</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tfoot>
                            <tr>
                                <th>Date</th>
                                <th>Numéro</th>
                                <th>Client</th>
                                <th>Type paiement</th>
                                <th>Statut</th>
                                <th>devi</th>
                                <th>Total TTC</th>
                                <th>Action</th>
                            </tr>
                            </tfoot>
                            <tbody class="ligth-body">
                            {% for bl in bls %}
                                <tr>
                                    <td>{{ bl.createdAt|date('d/m/Y') }}</td>
                                    <td>{{ bl.numero }}</td>
                                    <td>{{ bl.customer.nom }} {{ bl.customer.prenom }}</td>
                                    <td>
                                        {%  if bl.typePayement == 1 %}
                                            <span class="mr-2 mb-2 badge badge-success"> Espace  </span>
                                        {%  elseif bl.typePayement == 2 %}
                                            <span class="mr-2 mb-2 badge badge-success"> Cheque  </span>
                                        {%  else %}
                                            <span class="mr-2 mb-2 badge badge-success"> Carte  </span>
                                        {%  endif %}

                                    </td>
                                    <td>
                                        {%  if bl.status == 0 %}
                                            <span class="mr-2 mb-2 badge badge-warning">En attente  </span>
                                        {%  else %}
                                            <span class="mr-2 mb-2 badge badge-info"> Terminée </span>
                                        {%  endif %}
                                    </td>
                                    <td>
                                        {%  if bl.existDevi %}
                                            <span class="mr-2 mb-2 badge badge-success">OUI  </span>
                                        {%  else %}
                                            <span class="mr-2 mb-2 badge badge-danger"> NON </span>
                                        {%  endif %}
                                    </td>
                                    <td>
                                        {{ bl.totalTTC|number_format(3) }}
                                    </td>
                                    <td>
                                        <a class="  btn btn-sm btn-icon btn-info"
                                           data-toggle="tooltip"
                                           data-placement="top" title="" data-original-title="Consulter"
                                           style="color: white"
                                           href="{{ path('perso_detail_bl' ,  {id : bl.id}) }}"
                                        >
                                            <i class="fa fa-eye"></i>
                                        </a>
                                        {% if bl.existDevi == 0  %}
                                        <a class="  btn btn-sm btn-icon btn-success"
                                           data-toggle="tooltip"
                                           data-placement="top" title="" data-original-title="Modifier"
                                           style="color: white"
                                           href="{{ path('perso_edit_bl', {id: bl.id}) }}"
                                        >
                                            <i class="fa fa-edit"></i>
                                        </a>
                                        {% endif %}

                                        <button class="  btn btn-sm btn-icon btn-danger printBL"
                                                data-toggle="tooltip"
                                                type="button"
                                                data-id_bl= {{ bl.id }}
                                                data-placement="top" title="" data-original-title="Imprimer"
                                                style="color: white"
                                                href=""
                                        >
                                            <i class="fa fa-print"></i>
                                        </button>
                                    </td>
                                </tr>



                            {% endfor %}

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>




        {% endblock %}


{% block javascripts %}

{% endblock %}