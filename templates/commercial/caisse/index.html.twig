{% extends 'base.html.twig' %}

{% block title %} Caisse {% endblock %}

{% block stylesheets %}
<style>
    .totalCaisse{

        font-weight: bold;
        background-color: #ccd9e8;
        color: red;
        font-size: 25px;

    }
</style>
{% endblock %}
       {% block smenu %}
           <ul class="breadcrumb">
               <li class="breadcrumb-item">
                   <a href="{{ path('dashboard_personelle') }}">Tableau de bord</a>
               </li>
               <li class="breadcrumb-item">
                   <a href="#">Caisse</a>
               </li>
               <li class="breadcrumb-item">
                   <span>Liste</span>
               </li>
           </ul>
       {% endblock %}

        {% block content %}

            <div class="element-wrapper">
                <h6 class="element-header">
                    Caisse
                </h6>
                {{ include('default/FlashBag/flashBag.html.twig') }}

                <div class="element-box">
                    <h5 class="form-header">
                    </h5>

                    <div class="form-desc">

                    </div>


                    <div class="table-responsive">
                        <div class="row">
                            <div class="col-md-6">
                                <input type="date" class="form-control date_selected" name="date_selected" value="{{ "now"|date("Y-m-d") }}">

                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-md btn-primary printCaisse pull-right"><i class="fa fa-print"></i> Imprimer </button>

                            </div>

                        </div>
                        <div class="twig">
                            {%  if data %}
                                <div class="row">

                                </div>

                                <table id="dataTable1" width="100%" class="table table-striped table-lightfont">
                                    <thead>
                                    <tr>
                                        <th></th>
                                        <th>Date</th>
                                        <th>Numéro</th>
                                        <th>Client</th>
                                        <th>Montant</th>
                                        <th>N cheque</th>
                                        <th>Espece</th>
                                        <th>Reste</th>
                                        <th>Retenue</th>
                                        <th>Type paiement</th>
                                        {#                                <th>Action</th>#}
                                    </tr>
                                    </thead>
                                    <tfoot>
                                    <tr>
                                        <th></th>
                                        <th>Date</th>
                                        <th>Numéro</th>
                                        <th>Client</th>
                                        <th>Montant</th>
                                        <th>N cheque</th>
                                        <th>Espece</th>
                                        <th>Reste</th>
                                        <th>Retenue</th>
                                        <th>Type paiement</th>
                                        {#                                <th>Action</th>#}

                                    </tr>
                                    </tfoot>
                                    <tbody class="ligth-body">
                                    {% for c in data %}
                                        <tr style="{%  if  c['typeD'] =='Dépence' %} background-color: rgba(222,180,101,0.12)  {% elseif  c['typeD'] =='Avoir' %}  background-color: rgba(255,0,0,0.12) {% endif %}">
                                            <td>{{  c['typeD']  }}</td>
                                            <td>{{ c['date']|date('d/m/Y - g:ia') }}</td>
                                            <td>{{  c['num']  }}</td>
                                            <td>{%  if c['nomCustomer'] %}  {{ c['nomCustomer']}}  {% endif %}</td>
                                            <td>{{ c['montant']|format_currency('TND') }} </td>
                                            <td>{%  if c['ncheque'] is not null %} {{ c['ncheque']}} {% endif %}</td>
                                            <td>
                                                {%  if  c['typeD'] !='Facture' %} - {% endif %}
                                                {%  if c['espece'] is not null %} {{ c['espece']|format_currency('TND') }} {% else %} 0.000 {% endif %}
                                            </td>
                                            <td>{%  if c['reste'] is not null %} {{ c['reste']|format_currency('TND') }} {% else %} 0.000 {% endif %}</td>
                                            <td>{%  if c['retenu'] is not null %} {{ c['retenu']|format_currency('TND') }} {% else %} 0.000 {% endif %}</td>
                                            <td>{{ c['tp']}}</td>
                                            {#                                <td>#}
                                            {#                                    <a href="" class="btn btn-info btn-sm" title="détail"><i class="fa fa-eye"></i> </a>#}
                                            {#                                </td>#}
                                        </tr>

                                    {% endfor %}
                                    <tr >
                                        <td colspan="4"></td>
                                        <td>Total</td>
                                    </tr>

                                    <tr>
                                        <td colspan="4">Total dépense</td>
                                        <td>{{ total_depense|format_currency('TND') }}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">Total Espece</td>
                                        <td>{{ totalEspese|format_currency('TND') }}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">Total Cheque</td>
                                        <td>{{ totalCheque|format_currency('TND') }}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">Total Avoir</td>
                                        <td>{{ totalAvoir|format_currency('TND') }}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">Total Reste</td>
                                        <td>{{ totalReste|format_currency('TND') }}</td>
                                    </tr>
                                    <tr class="totalCaisse">
                                        <td style="font-weight: bold;" colspan="4">Total Caisse</td>
                                        <td style="font-weight: bold;">{{ total_caisse|format_currency('TND') }}</td>
                                    </tr>



                                    </tbody>
                                </table>
                            {% else %}
                                Pas de enregistrement

                            {% endif %}

                        </div>
                    </div>
                </div>
            </div>




        {% endblock %}


{% block javascripts %}
    <script src="{{ asset('app/js/comercial/caisse/caisse.js') }}"></script>


{% endblock %}